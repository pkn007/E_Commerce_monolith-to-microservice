{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pratheek K N\\\\OneDrive\\\\Desktop\\\\Cloud\\\\Project\\\\Monolithic_to_microservice\\\\monolith\\\\frontend\\\\src\\\\cart.js\",\n  _s = $RefreshSig$();\n// import { useState,useEffect } from \"react\";\n// import Item from \"./cartitem\";\n// import { useNavigate } from \"react-router-dom\";\n\n// function Cart() {\n//   const [items,setitems]=useState([])\n//   const [ctotal,setctotal]=useState(null)\n//   const [refr,setref]=useState(true)\n//   const nav = useNavigate()\n\n//   useEffect(() => {\n//     const getitems=async()=>{\n//       const res= await fetch(\"http://localhost:5003/getcart/\"+localStorage.user)\n//       const json=await res.json()\n//       setitems([...json])\n//       let temp=0\n//       for(const i of json){\n//         const res=await fetch(\"http://localhost:5002/getproduct/\"+i.product)\n//         const jsonp=await res.json()\n//         temp=temp+(jsonp.price*i.quantity)\n//        }\n//        setctotal(temp)\n//       }\n\n//   getitems()  \n\n//   }, [refr]);\n//   // useEffect(() => {\n//   //   const calctotal= ()=>{\n//   //     let temp=0\n//   //     console.log(items.length)\n//   //     items.forEach((n)=>console.log(n))\n\n//   //     setTimeout(() => {\n//   //       calctotal()\n//   //     }, 5000);\n//   // }, []);\n//   // useEffect( () => {\n//   //   const calctotal=async ()=>{\n//   //     var temp=0\n//   //      items.forEach(async function(n){\n//   //       const res=await fetch(\"http://localhost:5002/getproduct/\"+n.product)\n//   //         const json=await res.json()\n//   //         let tprice = await json.price*n.quantity\n//   //         temp+=tprice\n//   //         console.log(\"temp \"+temp)\n//   //      })\n//   //      for(let i of items){\n//   //       const res=await fetch(\"http://localhost:5002/getproduct/\"+i.product)\n//   //       const json=await res.json()\n//   //       temp=temp+(json.price*i.quantity)\n//   //      }\n//   //      setctotal(temp)\n//   //     }\n\n//   //   console.log('once')\n//   //   calctotal()\n//   // }, [items]);\n//   const checkout = async()=>{\n//     const user=localStorage.user\n//     const res = await fetch(\"http://localhost:5003/buy\",{\n//       method:\"POST\",\n//       headers:{'Content-type':'application/json'},\n//       body:JSON.stringify({user,ctotal})\n//     })\n//     if(res.ok)\n//       {alert(\"succesfully placed order\")\n//        nav('/order/'+localStorage.user)\n//       }\n//   }\n//     return (<div>\n\n// <section class=\"text-gray-600 body-font w-full\">\n//   <div class=\"container px-5 py-2 mx-auto w-full\">\n//     <div class=\"flex flex-col text-center w-full mb-5\">\n//       <h1 class=\"text-2xl font-medium title-font text-gray-900 tracking-widest\">YOUR CART</h1>\n//     </div>\n//     <div class=\"grid grid-flow-row gap-4  items-center \">\n//       {items.map((n)=>(\n\n//           <Item key={n.product} id={n.product} quan={n.quantity} setr={setref} r={refr}/>\n//       ))}\n//     </div>\n//     <div className=\"flex flex-wrap items-center justify-around mt-4 bg-slate-200 p-4 rounded-lg\">\n//       <h1 className=\"text-black font-semibold text-2xl\">Cart total - Rs {ctotal}</h1>\n//       <button className=\"bg-blue-500 p-2 text-xl rounded-lg text-white\" onClick={checkout}>Checkout</button>\n//     </div>\n//   </div>\n// </section>\n//     </div>  );\n// }\n\n// export default Cart;\n\nimport { useState, useEffect } from \"react\";\nimport Item from \"./cartitem\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Cart() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [ctotal, setCtotal] = useState(null);\n  const [refr, setRef] = useState(true);\n  const [error, setError] = useState(null);\n  const nav = useNavigate();\n  useEffect(() => {\n    const getItems = async () => {\n      try {\n        const res = await fetch(\"http://localhost:5001/getcart/\" + localStorage.user);\n        if (!res.ok) {\n          throw new Error(\"Failed to fetch cart items\");\n        }\n        const json = await res.json();\n        setItems([...json]);\n        let temp = 0;\n        for (const i of json) {\n          const res = await fetch(\"http://localhost:5001/getproduct/\" + i.product);\n          if (!res.ok) {\n            throw new Error(\"Failed to fetch product\");\n          }\n          const jsonp = await res.json();\n          temp = temp + jsonp.price * i.quantity;\n        }\n        setCtotal(temp);\n        setError(null);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        setError(\"\");\n      }\n    };\n    getItems();\n  }, [refr]);\n  const checkout = async () => {\n    const user = localStorage.user;\n    const res = await fetch(\"http://localhost:5001/buy\", {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user,\n        ctotal\n      })\n    });\n    if (res.ok) {\n      alert(\"Successfully placed order\");\n      nav(\"/order/\" + localStorage.user);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      class: \"text-gray-600 body-font w-full\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container px-5 py-2 mx-auto w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"flex flex-col text-center w-full mb-5\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            class: \"text-2xl font-medium title-font text-gray-900 tracking-widest\",\n            children: \"YOUR CART\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"grid grid-flow-row gap-4  items-center \",\n          children: error ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 22\n          }, this) : items.map(n => /*#__PURE__*/_jsxDEV(Item, {\n            id: n.product,\n            quan: n.quantity,\n            setr: setRef,\n            r: refr\n          }, n.product, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap items-center justify-around mt-4 bg-slate-200 p-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-black font-semibold text-2xl\",\n            children: [\"Cart total - Rs \", ctotal]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-blue-500 p-2 text-xl rounded-lg text-white\",\n            onClick: checkout,\n            children: \"Checkout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n}\n_s(Cart, \"WWr6/CaM2I3g13GGE1NPlu7dCm8=\", false, function () {\n  return [useNavigate];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["useState","useEffect","Item","useNavigate","jsxDEV","_jsxDEV","Cart","_s","items","setItems","ctotal","setCtotal","refr","setRef","error","setError","nav","getItems","res","fetch","localStorage","user","ok","Error","json","temp","i","product","jsonp","price","quantity","console","checkout","method","headers","body","JSON","stringify","alert","children","class","fileName","_jsxFileName","lineNumber","columnNumber","map","n","id","quan","setr","r","className","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Pratheek K N/OneDrive/Desktop/Cloud/Project/Monolithic_to_microservice/monolith/frontend/src/cart.js"],"sourcesContent":["// import { useState,useEffect } from \"react\";\n// import Item from \"./cartitem\";\n// import { useNavigate } from \"react-router-dom\";\n\n// function Cart() {\n//   const [items,setitems]=useState([])\n//   const [ctotal,setctotal]=useState(null)\n//   const [refr,setref]=useState(true)\n//   const nav = useNavigate()\n\n//   useEffect(() => {\n//     const getitems=async()=>{\n//       const res= await fetch(\"http://localhost:5003/getcart/\"+localStorage.user)\n//       const json=await res.json()\n//       setitems([...json])\n//       let temp=0\n//       for(const i of json){\n//         const res=await fetch(\"http://localhost:5002/getproduct/\"+i.product)\n//         const jsonp=await res.json()\n//         temp=temp+(jsonp.price*i.quantity)\n//        }\n//        setctotal(temp)\n//       }\n     \n//   getitems()  \n      \n//   }, [refr]);\n//   // useEffect(() => {\n//   //   const calctotal= ()=>{\n//   //     let temp=0\n//   //     console.log(items.length)\n//   //     items.forEach((n)=>console.log(n))\n      \n//   //     setTimeout(() => {\n//   //       calctotal()\n//   //     }, 5000);\n//   // }, []);\n//   // useEffect( () => {\n//   //   const calctotal=async ()=>{\n//   //     var temp=0\n//   //      items.forEach(async function(n){\n//   //       const res=await fetch(\"http://localhost:5002/getproduct/\"+n.product)\n//   //         const json=await res.json()\n//   //         let tprice = await json.price*n.quantity\n//   //         temp+=tprice\n//   //         console.log(\"temp \"+temp)\n//   //      })\n//   //      for(let i of items){\n//   //       const res=await fetch(\"http://localhost:5002/getproduct/\"+i.product)\n//   //       const json=await res.json()\n//   //       temp=temp+(json.price*i.quantity)\n//   //      }\n//   //      setctotal(temp)\n//   //     }\n    \n//   //   console.log('once')\n//   //   calctotal()\n//   // }, [items]);\n//   const checkout = async()=>{\n//     const user=localStorage.user\n//     const res = await fetch(\"http://localhost:5003/buy\",{\n//       method:\"POST\",\n//       headers:{'Content-type':'application/json'},\n//       body:JSON.stringify({user,ctotal})\n//     })\n//     if(res.ok)\n//       {alert(\"succesfully placed order\")\n//        nav('/order/'+localStorage.user)\n//       }\n//   }\n//     return (<div>\n\n// <section class=\"text-gray-600 body-font w-full\">\n//   <div class=\"container px-5 py-2 mx-auto w-full\">\n//     <div class=\"flex flex-col text-center w-full mb-5\">\n//       <h1 class=\"text-2xl font-medium title-font text-gray-900 tracking-widest\">YOUR CART</h1>\n//     </div>\n//     <div class=\"grid grid-flow-row gap-4  items-center \">\n//       {items.map((n)=>(\n\n//           <Item key={n.product} id={n.product} quan={n.quantity} setr={setref} r={refr}/>\n//       ))}\n//     </div>\n//     <div className=\"flex flex-wrap items-center justify-around mt-4 bg-slate-200 p-4 rounded-lg\">\n//       <h1 className=\"text-black font-semibold text-2xl\">Cart total - Rs {ctotal}</h1>\n//       <button className=\"bg-blue-500 p-2 text-xl rounded-lg text-white\" onClick={checkout}>Checkout</button>\n//     </div>\n//   </div>\n// </section>\n//     </div>  );\n// }\n\n// export default Cart;\n\n\nimport { useState, useEffect } from \"react\";\nimport Item from \"./cartitem\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction Cart() {\n  const [items, setItems] = useState([]);\n  const [ctotal, setCtotal] = useState(null);\n  const [refr, setRef] = useState(true);\n  const [error, setError] = useState(null);\n  const nav = useNavigate();\n\n  useEffect(() => {\n    const getItems = async () => {\n      try {\n        const res = await fetch(\"http://localhost:5001/getcart/\" + localStorage.user);\n        if (!res.ok) {\n          throw new Error(\"Failed to fetch cart items\");\n        }\n        const json = await res.json();\n        setItems([...json]);\n        let temp = 0;\n        for (const i of json) {\n          const res = await fetch(\"http://localhost:5001/getproduct/\" + i.product);\n          if (!res.ok) {\n            throw new Error(\"Failed to fetch product\");\n          }\n          const jsonp = await res.json();\n          temp = temp + jsonp.price * i.quantity;\n        }\n        setCtotal(temp);\n        setError(null);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        setError(\"\");\n      }\n    };\n\n    getItems();\n  }, [refr]);\n\n  const checkout = async () => {\n    const user = localStorage.user;\n    const res = await fetch(\"http://localhost:5001/buy\", {\n      method: \"POST\",\n      headers: { \"Content-type\": \"application/json\" },\n      body: JSON.stringify({ user, ctotal }),\n    });\n    if (res.ok) {\n      alert(\"Successfully placed order\");\n      nav(\"/order/\" + localStorage.user);\n    }\n  };\n\n  return (\n    <div>\n      <section class=\"text-gray-600 body-font w-full\">\n        <div class=\"container px-5 py-2 mx-auto w-full\">\n          <div class=\"flex flex-col text-center w-full mb-5\">\n            <h1 class=\"text-2xl font-medium title-font text-gray-900 tracking-widest\">YOUR CART</h1>\n          </div>\n          <div class=\"grid grid-flow-row gap-4  items-center \">\n            {error ? <p>{error}</p> : items.map((n) => (\n              <Item key={n.product} id={n.product} quan={n.quantity} setr={setRef} r={refr} />\n            ))}\n          </div>\n          <div className=\"flex flex-wrap items-center justify-around mt-4 bg-slate-200 p-4 rounded-lg\">\n            <h1 className=\"text-black font-semibold text-2xl\">Cart total - Rs {ctotal}</h1>\n            <button className=\"bg-blue-500 p-2 text-xl rounded-lg text-white\" onClick={checkout}>Checkout</button>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default Cart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}